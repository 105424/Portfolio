{"ts":1347559816834,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$(document).ready(init);\r\nvar width;\r\nvar height;\r\nvar mouseX;\r\nvar mouseY;\r\n\r\nfunction init()\r\n{    \r\n    console.log('--init--');\r\n    \r\n    setInterval(function(){\r\n        width = $(window).width();\r\n        height = $(window).height();            \r\n    },10);\r\n    \r\n    if (typeof config != 'undefined') parseDivs(config);\r\n    else console.log('config not found');\r\n\r\n    $('html').mousemove(function(event){\r\n        mouseX = event.clientX;\r\n        mouseY = event.clientY;\r\n        \r\n        console.log(divs)\r\n        \r\n        for(var i in divs)\r\n        {\r\n            console.log('type: '+i);\r\n            var div = divs[i];\r\n            console.log(div);\r\n            \r\n            if($(div).offset().top==mouseY)\r\n            {\r\n                $('html').css('cursor','s-resize');\r\n            }\r\n        }\r\n    });\r\n    \r\n    $('.movable').live('mousedown', startMove);\r\n    $('#save').live('click', save); //de save functie die het object met de cordinaten gaat opslaan;\r\n    $('#load').live('click', load ); //de save functie die het object met de cordinaten gaat opslaan;       \r\n    \r\n    sideMenu(); // de code van het zij menutje zoveel de animatie als de positionering (jammer genoeg kreeg ik dit niet in css voor elkaar);\r\n    \r\n    console.log(divs);\r\n    \r\n}\r\nfunction save(event)\r\n{   \r\n    console.log('---save----');\r\n    var _save = {};\r\n    \r\n    for(var i in divs)\r\n    {\r\n        _save[i] = divs[i].x+','+divs[i].y;\r\n    }\r\n\r\n    localStorage.setItem('save', JSON.stringify(_save));\r\n}\r\nfunction load(event)\r\n{\r\n    console.log('----load----');\r\n    var _load = JSON.parse(localStorage.getItem('save'));\r\n    \r\n    if(_load ===null) return;\r\n    \r\n    parseDivs(_load);\r\n}\r\nfunction startMove(event)\r\n{\r\n    var type = $(this).attr('id');\r\n    var target = divs[type]; \r\n    \r\n    xOffSet = event.clientX-target.x;\r\n    yOffSet = event.clientY-target.y;       \r\n    \r\n    $('html').css('cursor','move');\r\n   \r\n    console.log('----startmove----');\r\n    \r\n    $('html').bind('mousemove',function(event){\r\n        target.x = event.pageX-xOffSet;\r\n        target.y = event.pageY-yOffSet;\r\n        \r\n        if(target.y<37) target.y = 37;\r\n        if(target.x<0) target.x = 0;\r\n        if(target.y>(height-target.height)) target.y = height-target.height;\r\n        if(target.x>(width-target.width)) target.x = width-target.width;\r\n        \r\n        target.update();\r\n    });\r\n    \r\n    $('html').mouseup(function(event){\r\n        $('html').css('cursor','auto');\r\n        $('html').unbind('mousemove'); \r\n    });\r\n}\r\nvar div = function(type,cordinates)\r\n{\r\n    console.log('----div: '+type+'----');\r\n    console.log($('body').find('#'+type)[0]);\r\n    if($('body').find('#'+type)[0]===undefined) \r\n    {\r\n        console.log('   div does not exist');\r\n        delete divs[type];\r\n        console.log(divs);\r\n        return;\r\n    }\r\n    \r\n    this.dom = $('body').find('#'+type);\r\n    this.width = $(this.dom).width();\r\n    this.height = $(this.dom).height();\r\n    \r\n    \r\n    if(cordinates==='')\r\n    {\r\n        console.log('   no preset');\r\n        console.log('   off-top: '+$(this.dom).offset().top);\r\n        console.log('   off-left: '+$(this.dom).offset().left);\r\n        \r\n        this.x = $(this.dom).offset().left;\r\n        this.y = $(this.dom).offset().top;\r\n    }\r\n    else\r\n    {\r\n        console.log('   cordinates defined');\r\n        \r\n        var cords = cordinates.split(',');\r\n        var calc;\r\n        console.log('   split:'+cords); \r\n        if(isNaN(Number(cords[0]))===false) this.x = cords[0];\r\n        else\r\n        {  \r\n            console.log('   calculating width');\r\n            \r\n            var cordX = cords[0].split('+');\r\n            if (cordX[1] !== undefined) calc = '+';\r\n            else\r\n            {\r\n                cordX = cords[0].split('-');\r\n                calc = '-';\r\n            }\r\n            if(cordX[0]=='width')\r\n            {\r\n                if(calc=='-') this.x = width-cordX[1];\r\n                else if(calc=='+') this.x = width+cordX[1];           \r\n            }\r\n        }\r\n     \r\n        if(isNaN(Number(cords[1]))===false) this.y = cords[1];\r\n        else\r\n        {\r\n            var cordY = cords[1].split('+');\r\n            if (cordY[1] !== undefined) calc = '+';\r\n            else\r\n            {\r\n                cordY = cords[1].split('-');\r\n                calc = '-';\r\n            }\r\n            if(cordY[0]=='height')\r\n            {\r\n                if(calc=='-') this.y = height-cordY[1];\r\n                else if(calc=='+') this.y = height+cordY[1];\r\n            }\r\n        }\r\n    }\r\n    \r\n    $(this.dom).remove();\r\n    $('body').append(this.dom);\r\n    $(this.dom).addClass('movable');\r\n    \r\n    console.log('this,x:'+this.x);\r\n    console.log('this.y:'+this.y);\r\n    \r\n    $(this.dom).css('top',Number(this.y));\r\n    $(this.dom).css('left',Number(this.x));\r\n    \r\n    console.log($('body').find('#'+type)[0]);\r\n};\r\ndiv.prototype.update = function()\r\n{\r\n    console.log('----update----');\r\n    $(this.dom).css('top',this.y);\r\n    $(this.dom).css('left',this.x) ;\r\n};\r\n\r\nvar divs = {};\r\n\r\nfunction parseDivs(toParse)\r\n{\r\n    console.log('-----toPare------');\r\n    for(var type in toParse)\r\n    {\r\n        divs[type] = new div(type,toParse[type]);\r\n    }   \r\n}\r\n\r\nfunction sideMenu()\r\n{\r\n    var dom = $('body').find('#sideMenu');\r\n    var top = (height/2)-$(dom).height()+$('#topBar').height();\r\n    var left = (width)-$(dom).width();\r\n    var mWidth = $('#sideMenu').width()+2;\r\n    var offSet = mWidth;\r\n    \r\n    $('#sideMenuToggle').css('right', $('#sideMenu').width());\r\n    \r\n    $('#sideMenuToggle').click(function(){\r\n        console.log('sideMenuToggle Click');\r\n        if(offSet==mWidth)\r\n        {\r\n            console.log('offset=72');\r\n            var temp = setInterval(function(){\r\n                offSet -= 2;\r\n                if(offSet===0) clearInterval(temp);\r\n            },10);\r\n        }\r\n        if(offSet===0)\r\n        {\r\n            var temp2 = setInterval(function(){\r\n                offSet += 2;\r\n                if(offSet==mWidth) clearInterval(temp2);\r\n            },10);            \r\n        }\r\n    });\r\n    \r\n    setInterval(function(){   \r\n        top = (height/2)-$(dom).height()+$('#topBar').height()+37; //37 is de hoogte van de header bar\r\n        left = (width)-$(dom).width()+offSet; // \r\n        $(dom).css('top', top);\r\n        $(dom).css('left', left);\r\n    },10);\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":6468}]],"length":6468}
{"ts":1347559858049,"patch":[[{"diffs":[[0," divs[i]"],[1,".dom"],[0,";\r\n     "]],"start1":628,"start2":628,"length1":16,"length2":20}]],"length":6472,"saved":false}
{"ts":1347559870086,"patch":[[{"diffs":[[0,"m;\r\n"],[-1,"            console.log(div);\r\n"],[0,"    "]],"start1":639,"start2":639,"length1":39,"length2":8}]],"length":6441,"saved":false}
{"ts":1347559871839,"patch":[[{"diffs":[[0," {\r\n"],[-1,"            console.log('type: '+i);\r\n"],[0,"    "]],"start1":565,"start2":565,"length1":46,"length2":8}]],"length":6403,"saved":false}
{"ts":1347559966279,"patch":[[{"diffs":[[0,"==mouseY"],[1," && $(div).offset().left==mouseX"],[0,")\r\n     "]],"start1":653,"start2":653,"length1":16,"length2":48},{"diffs":[[0,"\n            }\r\n"],[1,"            else\r\n            {\r\n                   \r\n            }\r\n"],[0,"        }\r\n    }"]],"start1":763,"start2":763,"length1":32,"length2":101}]],"length":6504,"saved":false}
{"ts":1347559979788,"patch":[[{"diffs":[[0,"                "],[-1,"  "],[1,"$('html').css('cursor','auto');"],[0," \r\n            }"]],"start1":812,"start2":812,"length1":34,"length2":63}]],"length":6533,"saved":false}
{"ts":1347559998031,"patch":[[{"diffs":[[0,"  \r\n"],[-1,"        console.log(divs)\r\n        \r\n"],[0,"    "]],"start1":489,"start2":489,"length1":45,"length2":8}]],"length":6496,"saved":false}
{"ts":1347560240088,"patch":[[{"diffs":[[0,"    "],[-1,"if($(div).offset().top==mouseY && $(div).offset().left==mouseX"],[1,"//als x groter is dan de divs x + breedte - 2 en klienr dan de dvis x +breedte + 2\r\n            \r\n            \r\n            if(mouseX>$(div).offset().left-2 && mouseX<$(div).offset().left+2 && mouseY>$(div).offset().top && mouseY<$(div).offset().top+$(div).height();"],[0,")\r\n "]],"start1":590,"start2":590,"length1":70,"length2":274}]],"length":6700,"saved":false}
{"ts":1347560243653,"patch":[[{"diffs":[[0,"height()"],[-1,";"],[0,")\r\n     "]],"start1":851,"start2":851,"length1":17,"length2":16}]],"length":6699,"saved":false}
{"ts":1347560255843,"patch":[[{"diffs":[[0,"dom;"],[-1,"\r\n            \r\n            //als x groter is dan de divs x + breedte - 2 en klienr dan de dvis x +breedte + 2\r\n "],[0,"    "]],"start1":562,"start2":562,"length1":121,"length2":8}]],"length":6586,"saved":false}
{"ts":1347560321019,"patch":[[{"diffs":[[0,").left+2"],[1,")//"],[0," && mous"]],"start1":662,"start2":662,"length1":16,"length2":19}]],"length":6589,"saved":false}
{"ts":1347560333999,"patch":[[{"diffs":[[0,").left-2"],[1,")//"],[0," && mous"]],"start1":629,"start2":629,"length1":16,"length2":19}]],"length":6592,"saved":false}
{"ts":1347560343045,"patch":[[{"diffs":[[0,").left-2"],[-1,")//"],[0," && mous"]],"start1":629,"start2":629,"length1":19,"length2":16}]],"length":6589,"saved":false}
{"ts":1347560430265,"patch":[[{"diffs":[[0,">$(div)."],[-1,"offset().left"],[1,"x"],[0,"-2 && mo"]],"start1":614,"start2":614,"length1":29,"length2":17},{"diffs":[[0,"<$(div)."],[-1,"offset().left"],[1,"x"],[0,"+2)// &&"]],"start1":635,"start2":635,"length1":29,"length2":17}]],"length":6565,"saved":false}
{"ts":1347560451147,"patch":[[{"diffs":[[0," divs[i]"],[-1,".dom"],[0,";       "]],"start1":553,"start2":553,"length1":20,"length2":16},{"diffs":[[0,"(mouseX>"],[-1,"$("],[0,"div"],[-1,")"],[0,".x-2 && "]],"start1":603,"start2":603,"length1":22,"length2":19},{"diffs":[[0," mouseX<"],[-1,"$("],[0,"div"],[-1,")"],[0,".x+2)// "]],"start1":621,"start2":621,"length1":22,"length2":19}]],"length":6555,"saved":false}
{"ts":1347560467246,"patch":[[{"diffs":[[0,"\n            {\r\n"],[1,"                console.log(jeeee);\r\n"],[0,"                "]],"start1":717,"start2":717,"length1":32,"length2":69}]],"length":6592,"saved":false}
{"ts":1347560476846,"patch":[[{"diffs":[[0,"log("],[1,"'"],[0,"jeeee"],[1,"'"],[0,");\r\n"]],"start1":757,"start2":757,"length1":13,"length2":15}]],"length":6594,"saved":false}
{"ts":1347560491501,"patch":[[{"diffs":[[0,"X>div.x-"],[-1,"2"],[1,"3"],[0," && mous"]],"start1":609,"start2":609,"length1":17,"length2":17},{"diffs":[[0,"X<div.x+"],[-1,"2"],[1,"3"],[0,")// && m"]],"start1":627,"start2":627,"length1":17,"length2":17}]],"length":6594,"saved":false}
{"ts":1347560521247,"patch":[[{"diffs":[[0,"ursor','"],[-1,"s"],[1,"e"],[0,"-resize'"]],"start1":804,"start2":804,"length1":17,"length2":17}]],"length":6594,"saved":false}
{"ts":1347560737924,"patch":[[{"diffs":[[0,"  \r\n            "],[1,"console.log('jee1);l'"],[0,"\r\n            if"]],"start1":571,"start2":571,"length1":32,"length2":53}]],"length":6615,"saved":false}
{"ts":1347560739733,"patch":[[{"diffs":[[0,"ee1)"],[-1,";l"],[0,"'"],[1,";"],[0,"\r\n  "]],"start1":601,"start2":601,"length1":11,"length2":10}]],"length":6614,"saved":false}
{"ts":1347560743756,"patch":[[{"diffs":[[0,"jee1"],[-1,")"],[0,"'"],[1,")"],[0,";\r\n "]],"start1":600,"start2":600,"length1":10,"length2":10}]],"length":6614,"saved":false}
{"ts":1347560770859,"patch":[[{"diffs":[[0,"  $('html')."],[1,"live('"],[0,"mousemove(fu"]],"start1":377,"start2":377,"length1":24,"length2":30},{"diffs":[[0,"ousemove"],[-1,"("],[1,"',"],[0,"function"]],"start1":396,"start2":396,"length1":17,"length2":18}]],"length":6621,"saved":false}
{"ts":1347560810900,"patch":[[{"diffs":[[0,"div.x+3)"],[-1,"//"],[0," && mous"]],"start1":656,"start2":656,"length1":18,"length2":16},{"diffs":[[0,"mouseY>$"],[-1,"("],[0,"div"],[-1,").offset().top"],[1,".y"],[0," && mous"]],"start1":668,"start2":668,"length1":34,"length2":21},{"diffs":[[0,"seY<"],[-1,"$("],[0,"div"],[-1,").offset().top"],[1,".y"],[0,"+$(d"]],"start1":688,"start2":688,"length1":27,"length2":13}]],"length":6592,"saved":false}
{"ts":1347560815791,"patch":[[{"diffs":[[0,".y+$(div"],[1,".dom"],[0,").height"]],"start1":695,"start2":695,"length1":16,"length2":20}]],"length":6596,"saved":false}
{"ts":1347560836269,"patch":[[{"diffs":[[0,"<div.x+3"],[-1,")"],[0," && mous"]],"start1":655,"start2":655,"length1":17,"length2":16}]],"length":6595,"saved":false}
{"ts":1347560851231,"patch":[[{"diffs":[[0," mouseY>"],[-1,"$"],[0,"div.y &&"]],"start1":666,"start2":666,"length1":17,"length2":16}]],"length":6594,"saved":false}
{"ts":1347560856283,"patch":[[{"diffs":[[0,"  \r\n"],[-1,"            console.log('jee1');\r\n"],[0,"    "]],"start1":578,"start2":578,"length1":42,"length2":8},{"diffs":[[0," {\r\n"],[-1,"                console.log('jeeee');\r\n"],[0,"    "]],"start1":695,"start2":695,"length1":47,"length2":8}]],"length":6521,"saved":false}
